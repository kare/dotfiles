#!/bin/bash

function usage() {
	echo "usage: `basename $0` [-h]Â directory" 1>&2
	exit 1
}

if [ -z "$1" -o "$1" == "-h" ]; then
	usage
fi
dir=$1
if [ ! -d "$dir" ]; then
	mkdir -p $dir
fi

cd $dir
if [ -d .git ]; then
	echo "`basename $0`: existing .git directory found. aborting." 1>&2
	exit 2
fi
git init .
if [ -e .gitignore ]; then
	mv .gitignore .gitignore.org
fi
touch .gitignore
git add .gitignore
git commit -m "Add empty .gitignore"
if [ -e .gitignore.org ]; then
	mv .gitignore.org .gitignore
fi
