#!/bin/bash

function usage() {
	echo "usage: git-empty [-h]Â directory" 1>&2
}

if [ -z "$1" ] || [ "$1" == "-h" ]; then
	usage
	exit 1
fi
dir=$1
if [ ! -d "$dir" ]; then
	mkdir -p "$dir"
fi

cd "$dir" || exit 3
if [ -d .git ]; then
	echo "git-empty: existing .git directory found. aborting." 1>&2
	exit 2
fi
git init .
if [ -e .gitignore ]; then
	mv .gitignore .gitignore.org
fi
touch .gitignore
git add .gitignore
git commit -m "Add empty .gitignore"
if [ -e .gitignore.org ]; then
	mv .gitignore.org .gitignore
fi
git config color.ui false
