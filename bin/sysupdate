#!/bin/bash

case `uname` in
	FreeBSD)
		sudo freebsd-update fetch
		sudo freebsd-update install
		;;
	Darwin)
		softwareupdate --install --all
		which brew > /dev/null
		if [ $? -eq 0 ]; then
			brew update
			brew upgrade
			brew cleanup
		fi
		which port > /dev/null
		if [ $? -eq 0 ]; then
			sudo port selfupdate
			port outdated
			port upgrade outdated
		fi
		;;
	Linux)
		if [ -f /etc/debian_version ]; then
			sudo apt-get update
			sudo apt-get upgrade --show-upgraded --assume-yes
			sudo apt-get autoremove
			sudo apt-get autoclean
			sudo apt-get clean
		fi
		if [ -f /etc/arch-release ]; then
			sudo pacman --sync --refresh --sysupgrade --noconfirm
		fi
		;;
	*)
		echo "sysupdate: only freebsd, darwin and linux are supported" 1>&2
		exit 1
		;;
esac
